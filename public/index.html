<!DOCTYPE html>
<html>
    <head>
        <title>BlockEditor Playground</title>
        <meta charset="utf-8">
        <link rel="stylesheet" href="../dist/styles.css">
        <style>
            body {
                font-family: Arial, Helvetica, sans-serif;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>Edit</h1>
            <form id="form">
                <input type="hidden" name="content" id="content">
                <br>
                <button class="button" >Save</button>
            </form>
        </div>
        <div id="app"></div>
    </body>
    <script src="/dist/index.js"></script>
    <script>
        document.addEventListener('block-editor/init', e => {
            console.log(e)
        })

        const form = document.getElementById('form')
        form.addEventListener('submit', (e) => {
            e.preventDefault()
            console.log('submit', e)
        })

        const element = document.getElementById('content');
        element.addEventListener('change', (e) => {
            console.log(e.target.value)
        })

        const settings = {
            mediaUpload: ({filesList, onFileChange}) => {
                const files = Array.from(filesList).map(window.URL.createObjectURL)

                onFileChange(files)

                setTimeout(() => {
                    const uploadedFiles = Array.from(filesList).map(file => {
                        return {
                            id: file.name,
                            name: file.name,
                            url: `https://dummyimage.com/600x400/000/fff&text=${file.name}`
                        }
                    })
                    onFileChange(uploadedFiles)
                }, 1000)
            }
        }
        BlockEditor.initializeEditor(element, settings);
    </script>
</html>
